<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ album_type.title() }} Album</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      {% if album_type == 'love' %}
        background: transparent;
      {% else %}
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      {% endif %}
      color: #fff;
      text-align: center;
      overflow-x: hidden;
      position: relative;
    }

    h1 {
      margin-top: 30px;
      font-size: 2.8rem;
      text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.6);
    }

    .carousel-container {
      perspective: 1200px;
      margin: 60px auto;
      width: 80vw;
      max-width: 400px;
      height: 300px;
      position: relative;
    }

    .carousel {
      width: 100%;
      height: 100%;
      position: absolute;
      transform-style: preserve-3d;
      animation: spin 25s linear infinite;
    }

    .carousel img {
      position: absolute;
      width: 250px;
      height: 160px;
      border-radius: 20px;
      object-fit: cover;
      box-shadow: 0 0 15px #fff;
      transition: transform 0.5s;
    }

    @keyframes spin {
      from { transform: rotateY(0deg); }
      to { transform: rotateY(360deg); }
    }

    .no-images {
      margin: 60px auto;
      padding: 40px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(10px);
      max-width: 400px;
    }

    a {
      display: inline-block;
      margin: 20px;
      padding: 12px 25px;
      background-color: #fff;
      color: #2a5298;
      border-radius: 30px;
      text-decoration: none;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }

    a:hover {
      background-color: #ff4081;
      color: #fff;
      transform: scale(1.05);
    }

    /* Floating particles for love section */
    .floating-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      font-size: 20px;
      color: rgba(255, 255, 255, 0.6);
      animation: float 6s ease-in-out infinite;
    }

    .heart {
      color: #ff6b9d;
      font-size: 24px;
    }

    .sparkle {
      color: #ffd700;
      font-size: 18px;
    }

    .rose {
      color: #ff1493;
      font-size: 22px;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0px) rotate(0deg);
        opacity: 0.7;
      }
      25% {
        transform: translateY(-20px) rotate(90deg);
        opacity: 1;
      }
      50% {
        transform: translateY(-40px) rotate(180deg);
        opacity: 0.8;
      }
      75% {
        transform: translateY(-20px) rotate(270deg);
        opacity: 0.9;
      }
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 2rem;
      }

      .carousel-container {
        height: 250px;
      }

      .carousel img {
        width: 200px;
        height: 130px;
      }
    }

    /* Background video for love section */
    .background-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -2;
      opacity: 0.8;
    }

    .video-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.2);
      z-index: -1;
    }

    /* Enhanced text visibility for love section */
    {% if album_type == 'love' %}
    h1 {
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 255, 255, 0.3);
      background: rgba(0, 0, 0, 0.3);
      padding: 20px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      display: inline-block;
      font-size: 3.5rem;
      font-weight: 700;
      letter-spacing: 3px;
      animation: titleGlow 3s ease-in-out infinite alternate;
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 0 30px rgba(255, 64, 129, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
    }

    h1::before {
      content: 'ðŸ’•';
      position: absolute;
      left: -30px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2rem;
      animation: heartBeat 2s ease-in-out infinite;
    }

    h1::after {
      content: 'ðŸ’•';
      position: absolute;
      right: -30px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2rem;
      animation: heartBeat 2s ease-in-out infinite 1s;
    }

    @keyframes titleGlow {
      0% {
        box-shadow: 0 0 30px rgba(255, 64, 129, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.1);
        transform: scale(1);
      }
      100% {
        box-shadow: 0 0 50px rgba(255, 64, 129, 0.8), inset 0 0 30px rgba(255, 255, 255, 0.2);
        transform: scale(1.02);
      }
    }

    @keyframes heartBeat {
      0%, 100% {
        transform: translateY(-50%) scale(1);
      }
      50% {
        transform: translateY(-50%) scale(1.2);
      }
    }

    .carousel-container {
      background: transparent;
      border-radius: 20px;
      padding: 20px;
    }

    .no-images {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(15px);
    }

    a {
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      backdrop-filter: blur(10px);
    }

    a:hover {
      background: rgba(255, 64, 129, 0.9);
      color: #fff;
    }
    {% endif %}
  </style>
</head>
<body>
  {% if album_type == 'love' %}
    <!-- Background video for love section -->
    <video class="background-video" autoplay muted loop playsinline>
      <source src="{{ url_for('static', filename='videos/love-video.mp4') }}" type="video/mp4">
      <source src="{{ url_for('static', filename='videos/love-video.webm') }}" type="video/webm">
      Your browser does not support the video tag.
    </video>
    <div class="video-overlay"></div>
    
    <!-- Floating particles for love section -->
    <div class="floating-particles" id="particles"></div>
  {% endif %}

  <h1>{{ album_type.title() }} Album</h1>
  
  {% if images %}
    <div class="carousel-container">
      <div class="carousel">
        {% for img in images %}
          <img src="{{ url_for('static', filename='uploads/' + img) }}"
               style="transform: rotateY({{ loop.index0 * (360 // images|length) }}deg) translateZ(400px);">
        {% endfor %}
      </div>
    </div>
  {% else %}
    <div class="no-images">
      <h2>No Images Uploaded</h2>
      <p>No images were found for this album. Please go back and upload some images.</p>
    </div>
  {% endif %}
  
  <a href="/">â¬… Back to Home</a>

  <!-- Background music for all album types -->
  {% if album_type == 'marriage' %}
    <audio id="backgroundMusic" loop>
      <source src="{{ url_for('static', filename='music/wedding-song.mp3') }}" type="audio/mpeg">
      <source src="{{ url_for('static', filename='music/wedding-song.ogg') }}" type="audio/ogg">
      Your browser does not support the audio element.
    </audio>
  {% elif album_type == 'birthday' %}
    <audio id="backgroundMusic" loop>
      <source src="{{ url_for('static', filename='music/birthday-song.mp3') }}" type="audio/mpeg">
      <source src="{{ url_for('static', filename='music/birthday-song.ogg') }}" type="audio/ogg">
      Your browser does not support the audio element.
    </audio>
  {% elif album_type == 'couple' %}
    <audio id="backgroundMusic" loop>
      <source src="{{ url_for('static', filename='music/couple-song.mp3') }}" type="audio/mpeg">
      <source src="{{ url_for('static', filename='music/couple-song.ogg') }}" type="audio/ogg">
      Your browser does not support the audio element.
    </audio>
  {% elif album_type == 'love' %}
    <audio id="backgroundMusic" loop>
      <source src="{{ url_for('static', filename='music/love-song.mp3') }}" type="audio/mpeg">
      <source src="{{ url_for('static', filename='music/love-song.ogg') }}" type="audio/ogg">
      Your browser does not support the audio element.
    </audio>
  {% endif %}

  {% if album_type in ['marriage', 'birthday', 'couple', 'love'] %}
    <script>
      // Auto-play background music for all album types
      document.addEventListener('DOMContentLoaded', function() {
        const audio = document.getElementById('backgroundMusic');
        
        // Try to autoplay the music
        audio.play().catch(function(error) {
          console.log('Autoplay prevented:', error);
          // Fallback: play on first user interaction
          document.addEventListener('click', function() {
            audio.play().catch(function(e) {
              console.log('Play failed:', e);
            });
          }, { once: true });
        });
        
        // Ensure music continues playing even if page loses focus
        audio.addEventListener('pause', function() {
          setTimeout(function() {
            if (audio.paused) {
              audio.play().catch(function(e) {
                console.log('Resume failed:', e);
              });
            }
          }, 100);
        });
      });
    </script>
  {% endif %}

  {% if album_type == 'love' %}
    <script>
      // Create floating particles for love section
      document.addEventListener('DOMContentLoaded', function() {
        const particlesContainer = document.getElementById('particles');
        const particles = ['â¤ï¸', 'ðŸ’•', 'ðŸ’–', 'ðŸ’—', 'ðŸ’˜', 'ðŸ’', 'ðŸ’ž', 'ðŸ’Ÿ', 'âœ¨', 'ðŸŒŸ', 'ðŸ’«', 'ðŸŒ¹', 'ðŸŒº', 'ðŸŒ¸', 'ðŸ’'];
        
        function createParticle() {
          const particle = document.createElement('div');
          particle.className = 'particle';
          
          // Randomly choose particle type
          const randomParticle = particles[Math.floor(Math.random() * particles.length)];
          particle.textContent = randomParticle;
          
          // Add specific classes for styling
          if (randomParticle.includes('â¤ï¸') || randomParticle.includes('ðŸ’•') || randomParticle.includes('ðŸ’–') || 
              randomParticle.includes('ðŸ’—') || randomParticle.includes('ðŸ’˜') || randomParticle.includes('ðŸ’') || 
              randomParticle.includes('ðŸ’ž') || randomParticle.includes('ðŸ’Ÿ')) {
            particle.classList.add('heart');
          } else if (randomParticle.includes('âœ¨') || randomParticle.includes('ðŸŒŸ') || randomParticle.includes('ðŸ’«')) {
            particle.classList.add('sparkle');
          } else if (randomParticle.includes('ðŸŒ¹') || randomParticle.includes('ðŸŒº') || randomParticle.includes('ðŸŒ¸') || 
                     randomParticle.includes('ðŸ’')) {
            particle.classList.add('rose');
          }
          
          // Random position
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          
          // Random animation delay
          particle.style.animationDelay = Math.random() * 6 + 's';
          
          particlesContainer.appendChild(particle);
          
          // Remove particle after animation
          setTimeout(() => {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
          }, 6000);
        }
        
        // Create particles periodically
        setInterval(createParticle, 800);
        
        // Create initial particles
        for (let i = 0; i < 15; i++) {
          setTimeout(createParticle, i * 200);
        }
      });
    </script>
  {% endif %}
</body>
</html>
